version: '3'
services:
  service:
    image: filecloud-service:latest
    ports:
      - 8080:8080
    healthcheck:
      test: ["CMD-SHELL", "curl -X GET -f http://service:9080/management/health/liveness || exit 1"]
      interval: 15s
      timeout: 5s
      retries: 6
      start_period: 20s
    restart: always
    environment:
      - ROOT_FOLDER=/filecloud
    volumes:
      - /tmp/filecloud:/filecloud
    entrypoint: ["sh","init.sh"]